<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Angular + FlexLayout | Henrique Custódia</title>
    <meta name="description" content="Utilizando o módulo Angular baseado em flexbox">
    <meta name="robots" content="index,follow">
  <link rel="stylesheet" href="@fortawesome/fontawesome-free/css/all.min.css">
    <meta property="article:published_time" content="2017-11-27T00:00:00.000Z"><meta property="og:site_name" content="Henrique Custódia"><meta property="og:title" content="Angular + FlexLayout"><meta property="og:description" content="Utilizando o módulo Angular baseado em flexbox"><meta property="og:type" content="article"><meta property="og:url" content="/posts/2017/11/27/angular+flexlayout.html"><meta property="og:image" content="/angular+flexlayout.png"><meta name="twitter:title" content="Angular + FlexLayout"><meta name="twitter:description" content="Utilizando o módulo Angular baseado em flexbox"><meta name="twitter:url" content="/posts/2017/11/27/angular+flexlayout.html"><meta name="twitter:card" content="summary_large_image"><meta name="twitter:image" content="/angular+flexlayout.png"><meta name="twitter:label1" content="Written by"><meta name="twitter:data2" content="Henrique Custódia"><meta name="twitter:creator" content="@henricustodia"><meta name="twitter:label2" content="Filed under"><meta name="twitter:data2" content="angular"><meta property="article:tag" content="angular">
    <link rel="preload" href="/assets/css/0.styles.ed69e016.css" as="style"><link rel="preload" href="/assets/js/app.ba22b243.js" as="script"><link rel="preload" href="/assets/js/3.505b7bcb.js" as="script"><link rel="preload" href="/assets/js/6.88906aba.js" as="script"><link rel="prefetch" href="/assets/js/10.e4d43c67.js"><link rel="prefetch" href="/assets/js/2.0d45ff01.js"><link rel="prefetch" href="/assets/js/4.64b0809d.js"><link rel="prefetch" href="/assets/js/5.d49bde54.js"><link rel="prefetch" href="/assets/js/7.36b09ecf.js"><link rel="prefetch" href="/assets/js/8.4fa920d1.js"><link rel="prefetch" href="/assets/js/9.63695a80.js">
    <link rel="stylesheet" href="/assets/css/0.styles.ed69e016.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div data-v-4fda8c6a><nav class="header navbar navbar-dark bg-dark" data-v-4fda8c6a><div class="d-flex flex-column flex-sm-row align-items-center container" data-v-4fda8c6a><a href="/" class="text-white router-link-active" data-v-4fda8c6a><h3 data-v-4fda8c6a>Henrique Custódia</h3></a> <div class="ml-sm-auto" data-v-4fda8c6a><a href="/" class="text-white btn btn-outline-secondary router-link-active" data-v-4fda8c6a>Blog</a> <a href="/sobre-mim" class="text-white btn btn-outline-secondary" data-v-4fda8c6a>Sobre mim</a></div></div></nav> <div class="container post-container py-3" data-v-4fda8c6a><img src="/angular+flexlayout.png" alt="cover" class="my-3 w-100" data-v-4fda8c6a> <div class="post-content content__default" data-v-4fda8c6a><h1 id="angular-flexlayout"><a href="#angular-flexlayout" aria-hidden="true" class="header-anchor">#</a> Angular + FlexLayout</h1> <p>Atualmente nos projetos em que estou trabalhando, utilizamos como tecnologia base para o Frontend o framework Angular2+, sendo assim poupamos muito tempo que poderia ser gasto construindo toda um setup para os projetos.</p> <p>Apesar do Angular nos tornar mais produtivos e organizados, particulamente sempre tive dúvida em qual library css usar para estruturar os layouts, pois na maioria dos casos optei por usar determinadas libraries css pelo seu sistema de grid que geralmente são feitas em cima do Flexbox, como por exemplo o Bulma.</p> <p>Infelizmente utilizando apenas css, não é possível controlar quando o código deve rodar alguma rotina, como por exemplo: esconder utilizando a diretiva *ngIf determinado elemento quando resolução for menor que 600px. Sendo assim, pesquisando por uma alternativa vinda do próprio Angular, encontrei o maravilhoso módulo <a href="https://github.com/angular/flex-layout" target="_blank" rel="noopener noreferrer">FlexLayout<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>!</p> <p>O FlexLayout é um módulo Angular oficial que permite o controle da media query que está ativa na atual resolução da aplicação em algum device, sendo possível registrar observers para rodar rotinas js quando a resolução da aplicação mudar (muito útil em modo de desenvolvimento) através de um service. Existem também várias diretivas que utilizam flexbox para construir o layout da aplicação.</p> <h2 id="beleza-mas-como-uso-o-modulo"><a href="#beleza-mas-como-uso-o-modulo" aria-hidden="true" class="header-anchor">#</a> Beleza mas como uso o módulo?</h2> <p>Antes de tudo instale o módulo em sua aplicação:</p> <div class="language- extra-class"><pre class="language-text"><code>npm i @angular/flex-layout
</code></pre></div><p>Para usar o módulo em um componente, você precisará importar o mesmo no módulo do componente que vai consumi-lo:</p> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> FlexLayoutModule <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'@angular/flex-layout'</span><span class="token punctuation">;</span>

@<span class="token function">NgModule</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  imports<span class="token punctuation">:</span> <span class="token punctuation">[</span>
    FlexLayoutModule
  <span class="token punctuation">]</span>
  <span class="token operator">...</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
<span class="token keyword">export</span> <span class="token keyword">class</span> <span class="token class-name">Module</span> <span class="token punctuation">{</span> <span class="token punctuation">}</span>
</code></pre></div><p>Pronto! Agora já podemos usar as diretivas e o service do FlexLayout.</p> <h2 id="massa-mas-como-uso-essas-diretivas"><a href="#massa-mas-como-uso-essas-diretivas" aria-hidden="true" class="header-anchor">#</a> Massa! Mas como uso essas diretivas?</h2> <p><a href="https://github.com/angular/flex-layout" target="_blank" rel="noopener noreferrer">FlexLayout<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> fornece inscríveis diretivas para estruturar o layout, como por exemplo: fxLayout, fxFlex e fxLayoutAlign. Essas diretivas podem ser utilizadas da seguinte forma:</p> <div class="language-html extra-class"><pre class="language-html"><code><span class="token comment">&lt;!-- 
fxLayout=&quot;row&quot; === display: flex; flex-direction: row
fxLayoutAlign=&quot;center center&quot; === justify-content: center; align-items: center
fxFlex=&quot;50%&quot; === flex-basis: 50%
--&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">fxLayout</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>row<span class="token punctuation">&quot;</span></span> <span class="token attr-name">fxLayoutAlign</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>center center<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">fxFlex</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>50%<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>Flex item 1<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">fxFlex</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>50%<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>Flex item 1<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><p>Todas as diretivas suportam os sufixos para as <a href="https://github.com/angular/flex-layout/wiki/Responsive-API#responsive-features" target="_blank" rel="noopener noreferrer">media queries alias padrões<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>: xs, gt-xs, sm, gt-sm, md, gt-md, lg, gt-lg e xl. Para utilizar as diretivas com sufixos é muito simples, um bom exemplo usando o padrão mobile-first seria:</p> <div class="language-html extra-class"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">fxLayout</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>column<span class="token punctuation">&quot;</span></span> <span class="token attr-name">fxLayout.gt-sm</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>row<span class="token punctuation">&quot;</span></span> <span class="token attr-name">fxLayoutAlign</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>start center<span class="token punctuation">&quot;</span></span> <span class="token attr-name">fxLayoutAlign.gt-sm</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>center start<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">fxFlex</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>50%<span class="token punctuation">&quot;</span></span> <span class="token attr-name">fxFlex.gt-sm</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>75%<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>Item 1<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">fxFlex</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>50%<span class="token punctuation">&quot;</span></span> <span class="token attr-name">fxFlex.gt-sm</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>25%<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>Item 2<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><p>Existem muitas diretivas que suprem as mais diversas funcionalidades do flexboxc, dê uma conferidade clicando <a href="https://github.com/angular/flex-layout/wiki/API-Documentation" target="_blank" rel="noopener noreferrer">aqui<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>.</p> <h2 id="legal-e-o-service-como-uso"><a href="#legal-e-o-service-como-uso" aria-hidden="true" class="header-anchor">#</a> Legal e o service como uso?</h2> <p>Para utilizar o service do FlexLayout é muito simples.</p> <p>Injete o service. Vamos supor que queremos utiliza-lo em um componente:</p> <div class="language-ts extra-class"><pre class="language-ts"><code>@<span class="token function">Component</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token keyword">export</span> <span class="token keyword">class</span> <span class="token class-name">ExampleComponent</span> <span class="token punctuation">{</span>
  <span class="token keyword">constructor</span><span class="token punctuation">(</span><span class="token parameter"><span class="token keyword">private</span> media<span class="token punctuation">:</span> ObservableMedia</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p>Se quisermos rodar alguma rotina no componente sempre quando a resolução for maior que sm (que no caso seria gt-sm) poderíamos fazer da seguinte forma:</p> <div class="language-ts extra-class"><pre class="language-ts"><code>@<span class="token function">Component</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token keyword">export</span> <span class="token keyword">class</span> <span class="token class-name">ExampleComponent</span> <span class="token punctuation">{</span>
   
  gtSmWatcherSubscription<span class="token punctuation">:</span> Subscription<span class="token punctuation">;</span>
  
  <span class="token keyword">constructor</span><span class="token punctuation">(</span><span class="token parameter"><span class="token keyword">private</span> media<span class="token punctuation">:</span> ObservableMedia</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token punctuation">}</span>
  
  <span class="token function">ngOnInit</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span> <span class="token keyword">void</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>gtSmWatcherSubscription <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>media
      <span class="token punctuation">.</span><span class="token function">asObservable</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
      <span class="token punctuation">.</span><span class="token function">filter</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token keyword">this</span><span class="token punctuation">.</span>media<span class="token punctuation">.</span><span class="token function">isActive</span><span class="token punctuation">(</span><span class="token string">'gt-sm'</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
      <span class="token punctuation">.</span><span class="token function">subscribe</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
        <span class="token comment">// Some code here</span>
      <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
  
  <span class="token comment">// sempre remova as subscriptions para evitar erros inesperados </span>
  <span class="token function">ngOnDestroy</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span> <span class="token keyword">void</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>gtSmWatcherSubscription<span class="token punctuation">.</span><span class="token function">unsubscribe</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p>Existe uma documentação completa sobre o service ObservableMedia no repositório do FlexLayout, que pode ser acessada <a href="https://github.com/angular/flex-layout/wiki" target="_blank" rel="noopener noreferrer">aqui<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>.</p> <h2 id="conclusao"><a href="#conclusao" aria-hidden="true" class="header-anchor">#</a> Conclusão</h2> <p>Para necessidades que vão além do css (como essa que apresentei no artigo) FlexLayout pode servir de extrema ajuda para o que se pretende fazer!</p> <p>Se esse artigo ajudou você de alguma forma não deixe de compartilhar e recomendar, garanto que existem muitas pessoas com as mesmas necessidades!</p> <p>Obrigado por ler e até a próxima! 😃</p></div> <div class="d-flex mt-4 justify-content-center" data-v-4fda8c6a><a href="https://twitter.com/henricustodia" target="_blank"><i class="fab fa-2x fa-twitter"></i></a></div></div></div><div class="global-ui"></div></div>
    <script src="/assets/js/app.ba22b243.js" defer></script><script src="/assets/js/3.505b7bcb.js" defer></script><script src="/assets/js/6.88906aba.js" defer></script>
  </body>
</html>
